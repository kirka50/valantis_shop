# Тестовое задание для Valantis 

Задание заключается в создании страницы которая отображает по 50 единиц товаров используя API Valantis
Из функционала должен быть фильтр, поиск и постраничный переход

## Общая структура  
    
Проект имеет 1 главный компонент `App` и 3 вспомогательных `ShopItem`, `Paginator`, `FilterItem`
### `App`
    
Данный компонент содержит в себе все модели данных, логику для их обработки и управления над ними.   
Все данные подгружаются динамический при помощи `custom` хуков.  
Хранит в себе логику по отображению вспомогательных компонентов

#### `ShopItem`

Данный компонент отображает одну единицу товара магазина, никакой логики в себе не хранит.  
Если у товара нет брэнда, то компонент отображает "Бренд отсутствует"

#### `Paginator`

Данный компонент принимает в себя ссылки на функции `pervPage` и `nextPage`, а так же номер текущей страницы.  
Не имеет под собой никакой логики, кроме логики отображения


#### `FilterItem`

Данный компонент отображает поля фильтрации и их строки.  
Принимает массив полей фильтра и ссылку на функцию `chooseFilterItem` 
которая выполняет логику по изменению массива `filter` (см. раздел Фильтрация).  
Делает проверку на то, является ли текущее поле месиво полем `product` и 
если является, то отображает его как поле input  
Поле `product` выполняет функцию `chooseFilterItem` только после расфокусировки клиента (выход мыши из поля).  
Остальные поля фильтрации отображают свои строки как `option`

## История данных
Описание поведения данных при первом запуске

1 Инициализируется хук `useFilterFields`. Загружает доступные для фильтра поля.   
2 Инициализируется состояние `filter`. Данное состояние является параметром для запроса `filter`  
По умолчанию равно `[]`.  
3 Инициализируется состояние `activePage`. Данное состояние является значением текущей страницы пользователя.   
По умолчанию равна 1.  
4 Инициализируется состояние `shopItemsId`. Данное состояние динамический запрашивает id единиц товаров в кол-ве 50 штук. 
Принимает в себя значение activePage, что бы отображать следующие id товаров при смене страницы.  
5 Инициализируется состояние `filteredIds`. Данное состояние динамический запрашивает id товаров, которые соответствуют значениям из 
состояния `filter`.   
Принимает в себя состояние `filter`.  
По умолчанию равна `[]`.  
Если состояние `filer` пустое, то возвращает значение по умолчанию.  
6 Инициализируется состояние `shopItems`. Данное состояние динамический запрашивает описание товаров по их id.  
Принимает в себя состояния `shopItemsId`, `filteredIds` и `activePage`.  
Если состояние `filteredIds` не пустое, то запрашивает описание предметов из него. Иначе запрашивает описание предметов из состояния shopItemsId.
Если оба состояния пустые, то возвращает значение по умолчанию.  
По умолчанию равно `[]` 

Логика отображения

* Если состояние `filterFields`, не пустое, то отображает каждое поле этого состояния в компоненте `FilterItem`.  
* Происходят проверки на то, находятся ли состояния `shopItemsId` и `shopItems` на стадии загрузки и уведомляет об этом.  
* Если данные уже загрузились, то отображает их компонентом `ShopItem`
* Если поля фильтра пустые, то отображает пагинацию и предоставляет доступ к её функционалу. *Отображает данные в соответствии с текущей страницей*
* Если хотя бы одно поле фильтра не пустое, то отображает отфильтрованные данные без функционала пагинации 
## Фильтрация

Фильтрация выполненная динамический, так как количество полей для фильтрации можно получить из API, 
что по сути делает
фильтр модульным и расширяемым. Данная особенность учтена и фильтр может брать n количество полей из API

`По хорошему с API бы присылать какое поле по какому принципу должна сравниваться(Строгое/нестрогое), 
тогда можно достичь полной модульности и раширяемости`

Поле Product реализованно как input (Строгое соответствие)  
Поле Prices реализованно как option в select (Нестрогое соответствие)  
Поле Brand реализованно как option в select (Нестрогое соответствие) 

В компоненте App.jsx есть функция, которая отвечает за логику фильтрации, она изменяет состояние `filter`
Если состояние `filter` пустое, то считается что фильтр пуст, тогда идёт просмотр всех единиц товара и открывается
доступ к постраничной пагинации

## Пагинация
Пагинация выполнена в виде слайдера страниц, с отображением текущей страницы  
Для работы пагинации используются параметры запроса `get_ids`: `limit` и `offset`  
Логика этого описана в хуке useShopIds. Туда подаётся номер текущей страницы в качестве аргумента.  
Предусмотрена защита от перескрола страницы, если единиц товара уже не хватает что бы отобразить следующую страницу, 
то такой возможности не предоставляется. 

